function BigInteger(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function am2(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var l=32767&this[e],c=this[e++]>>15,u=a*l+c*s;l=s*l+((32767&u)<<15)+n[r]+(1073741823&i),i=(l>>>30)+(u>>>15)+a*c+(i>>>30),n[r++]=1073741823&l}return i}function am3(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],c=this[e++]>>14,u=a*l+c*s;l=s*l+((16383&u)<<14)+n[r]+i,i=(l>>28)+(u>>14)+a*c,n[r++]=268435455&l}return i}function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var n=BI_RC[e.charCodeAt(t)];return null==n?-1:n}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=8==n?255&e[r]:intAt(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else if(64==e)t=6;else{if(4!=e)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=int2char(r));s>=0;)a<t?(r=(this[s]&(1<<a)-1)<<t-a,r|=this[--s]>>(a+=this.DB-t)):(r=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=int2char(r));return i?o:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function nbits(e){var t=1,n;return 0!=(n=e>>>16)&&(e=n,t+=16),0!=(n=e>>8)&&(e=n,t+=8),0!=(n=e>>4)&&(e=n,t+=4),0!=(n=e>>2)&&(e=n,t+=2),0!=(n=e>>1)&&(e=n,t+=1),t}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a;for(a=this.t-1;a>=0;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;a>=0;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}function bnpSubTo(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=nbi());var o=nbi(),s=this.s,a=e.s,l=this.DB-nbits(r[r.t-1]);l>0?(r.lShiftTo(l,o),i.lShiftTo(l,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,u=o[c-1];if(0!=u){var d=u*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),p=this.FV/d,h=(1<<this.F1)/d,g=1<<this.F2,f=n.t,m=f-c,_=null==t?nbi():t;for(o.dlShiftTo(m,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),BigInteger.ONE.dlShiftTo(c,_),_.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var b=n[--f]==u?this.DM:Math.floor(n[f]*p+(n[f-1]+g)*h);if((n[f]+=o.am(0,b,n,m,0,c))<b)for(o.dlShiftTo(m,_),n.subTo(_,n);n[f]<--b;)n.subTo(_,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&BigInteger.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),s<0&&BigInteger.ZERO.subTo(n,n)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var n=nbi(),r=nbi(),i=t.convert(this),o=nbits(e)-1;for(i.copyTo(n);--o>=0;)if(t.sqrTo(n,r),(e&1<<o)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)}function bnModPowInt(e,t){var n;return n=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,n)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=nbv(n),i=nbi(),o=nbi(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(e)+s}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,o=0,s=0,a=0;a<e.length;++a){var l=intAt(e,a);l<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function bnToByteArray(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=cbit(this[n]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function bnpChangeBit(e,t){var n=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),n=nbi();return this.divRemTo(e,t,n),new Array(t,n)}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,n){e.multiplyTo(t,n)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()}function bnpMultiplyUpperTo(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnModPow(e,t){var n=e.bitLength(),r,i=nbv(1),o;if(n<=0)return i;r=n<18?1:n<48?3:n<144?4:n<768?5:6,o=n<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var s=new Array,a=3,l=r-1,c=(1<<r)-1;if(s[1]=o.convert(this),r>1){var u=nbi();for(o.sqrTo(s[1],u);a<=c;)s[a]=nbi(),o.mulTo(u,s[a-2],s[a]),a+=2}var d=e.t-1,p,h=!0,g=nbi(),f;for(n=nbits(e[d])-1;d>=0;){for(n>=l?p=e[d]>>n-l&c:(p=(e[d]&(1<<n+1)-1)<<l-n,d>0&&(p|=e[d-1]>>this.DB+n-l)),a=r;0==(1&p);)p>>=1,--a;if((n-=a)<0&&(n+=this.DB,--d),h)s[p].copyTo(i),h=!1;else{for(;a>1;)o.sqrTo(i,g),o.sqrTo(g,i),a-=2;a>0?o.sqrTo(i,g):(f=i,i=g,g=f),o.mulTo(g,s[p],i)}for(;d>=0&&0==(e[d]&1<<n);)o.sqrTo(i,g),f=i,i=g,g=f,--n<0&&(n=this.DB-1,--d)}return o.revert(i)}function bnGCD(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var n=e.clone(),r=this.clone(),i=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),o.subTo(a,o)):(r.subTo(n,r),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=r.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a}function bnIsProbablePrime(e){var t,n=this.abs();if(1==n.t&&n[0]<=lowprimes[lowprimes.length-1]){for(t=0;t<lowprimes.length;++t)if(n[0]==lowprimes[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<lowprimes.length;){for(var r=lowprimes[t],i=t+1;i<lowprimes.length&&r<lplim;)r*=lowprimes[i++];for(r=n.modInt(r);t<i;)if(r%lowprimes[t++]==0)return!1}return n.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>lowprimes.length&&(e=lowprimes.length);for(var i=nbi(),o=0;o<e;++o){i.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var s=i.modPow(r,this);if(0!=s.compareTo(BigInteger.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<n&&0!=s.compareTo(t);)if(s=s.modPowInt(2,this),0==s.compareTo(BigInteger.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function dataTable(e,t,n,r){return r&&(t.callbackFunction=r),$(e).DataTable(dtConfig(t,n))}function dtConfig(e,t){var n=this;t&&_.isObject(t)||(t={});var r={ajax:function(n,r,i){n.page=n.start/n.length+1;var o=!!n.draw&&n.draw,s={params:n,fresh:!!t.fresh&&t.fresh};_.has(t,"persist")&&(s.persist=t.persist);var a=e.url,l="";s.params&&(l=a+"?"+$.param(s.params),_.has(s.params,"draw")&&delete s.params.draw,a=a+"?"+$.param(s.params)),__DataRequest.get(l,{},function(t){t.draw=o,e.callbackFunction&&_.isFunction(e.callbackFunction)&&e.callbackFunction.call(this,t),r(t)})},drawCallback:function(e){var t=this.api(),n=t.table();_.has(n.columns,"adjust")&&_.has(n.responsive,"recalc")&&_.delay(function(){n.columns.adjust().responsive.recalc()},180)},columns:[],responsive:{details:{renderer:function(e,t,n){return _.map(n,function(e,t){return e.hidden?'<li data-dtr-index="'+e.columnIndex+'" data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><span class="dtr-title">'+e.title+'</span> <span class="dtr-data">'+e.data+"</span></li>":""}).join("")}}}};return e.dtOptions&&_.assign(r,e.dtOptions),r.columns=_.map(e.columnsData,function(e){return{data:e.name?e.name:null,orderable:!!e.orderable,render:function(t,n,r,i){return e.name?r.dtSubject=e.name:r=t,e.template?__Utils.template(e.template,r):r[e.name]}}}),r}function reloadDT(e){e.ajax.reload(null,!1),__Utils.log("__DataStore:: DataTable reloaded")}function showSuccessMessage(e){new Noty($.extend({},notyDefaultOptions,{type:"success",text:e})).show()}function showErrorMessage(e){new Noty($.extend({},notyDefaultOptions,{type:"error",text:e})).show()}function showInfoMessage(e){new Noty($.extend({},notyDefaultOptions,{type:"info",text:e})).show()}function showWarnMessage(e){new Noty($.extend({},notyDefaultOptions,{type:"warning",text:e})).show()}function showConfirmation(e,t,n){var r=$(e),i="";i=r.length?r.html():e,n||(n={});var o=new Noty($.extend({},{layout:"center",theme:"bootstrap-v4",callbacks:{beforeShow:function(){$("body").addClass("overflow-hidden")},onClose:function(){$("body").removeClass("overflow-hidden")}},modal:!0,closeWith:["button"],buttons:[Noty.button("YES","btn btn-success btn-sm mr-2",function(){"function"==typeof t&&(t(),o.close())}),Noty.button("NO","btn btn-danger btn-sm",function(){o.close()})],text:i,animation:{open:"animated fadeInDown faster",close:"animated fadeOutUp faster"}},n));return o.show(),o}function configure(e,t){t&&!_.isUndefined(t)||(t=window.__pusherAppOptions),pusher=new Pusher(e,t)}function subscribe(e,t,n,r,i){_.isUndefined(i)&&(i=!1),configure(n),pusher||configure(n);var o=pusher.subscribe(e);i&&(pusher.disconnect(),o.unbind(t),pusher.connect()),o.bind(t,function(e){r(e)})}function disconnect(){pusher&&pusher.disconnect()}function accountSubscribe(e,t,n,r,i){_.isUndefined(i)&&(i=!1),subscribe("channel-"+n,e,t,r,i)}function subscribeNotification(e,t,n,r,i){_.isUndefined(i)&&(i=!1),accountSubscribe(e,t,n,r,i)}function addView(e,t){$("#"+e)[0]||($("<div/>",{id:"remote_video_panel_"+e,class:"video-view"}).appendTo("#video"),$("<div/>",{id:"remote_video_"+e,class:"video-placeholder remote-video"}).appendTo("#remote_video_panel_"+e),$("<div/>",{id:"remote_video_info_"+e,class:"video-profile "+(t?"":"hide")}).appendTo("#remote_video_panel_"+e),$("<div/>",{id:"video_autoplay_"+e,class:"autoplay-fallback hide"}).appendTo("#remote_video_panel_"+e))}function removeView(e){$("#remote_video_panel_"+e)[0]&&$("#remote_video_panel_"+e).remove()}function handleMessageActionContainer(e,t){"MESSAGE_REQUEST_ACCEPTED"==e||"SEND_NEW_MESSAGE"==e?(t&&__Messenger.loadUploaderInstance(),__Messenger.hideShowDropdownButtons(!0),$("#lwSendMessageForm").show(),$("#lwDeclineMessage").hide()):"MESSAGE_REQUEST_RECEIVED"==e?($("#lwSendMessageForm").hide(),$("#lwAcceptChatRequestBtn").show(),$("#lwDeclineChatRequestBtn").show(),__Messenger.hideShowDropdownButtons(!1)):"MESSAGE_REQUEST_DECLINE"==e?(__Messenger.hideShowDropdownButtons(!1),$("#lwAcceptChatRequestBtn").show()):"MESSAGE_REQUEST_DECLINE_BY_USER"==e?($("#lwSendMessageForm").hide(),$("#lwDeclineMessage").show()):"MESSAGE_REQUEST_SENT"==e&&(t&&__Messenger.loadUploaderInstance(),__Messenger.hideShowDropdownButtons(!1),$("#lwSendMessageForm").show(),$("#lwDeclineMessage").hide())}function userChatResponse(e){$(".lw-messenger").unbind(),$("#lwChatSidebarToggle").unbind(),1==e.reaction&&(currentSelectedUserId=e.data.userData.user_id,currentSelectedUserUid=e.data.userData.user_uid,__Messenger.sendMessageUrl=__Utils.apiURL(__Messenger.sendMessageRawUrl,{userId:currentSelectedUserId}),_.defer(function(){$(".lw-messenger-chat-window").scrollTop(1e6),handleMessageActionContainer(e.data.userData.messageRequestStatus,!0),__Messenger.hideShowChatSidebar(),__Messenger.loadEmojiContent(),__Messenger.openStickerBottomSheet(),__Messenger.openGifBottomSheet(),__Messenger.createSendButtonInstance(),_.delay(function(){__Messenger.hideShowDropdownButtons(e.data.userData.enableAudioVideoLinks)},100),__Messenger.showMessageRequestNotification()}))}var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;if(null==rng_pool){rng_pool=new Array,rng_pptr=0;var t;if(window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);for(window.crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes;var RSAPublicKey=function(e,t){this.modulus=new BigInteger(Hex.encode(e),16),this.encryptionExponent=new BigInteger(Hex.encode(t),16)},UTF8={encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},decode:function(e){for(var t="",n=0,r=$c1=$c2=0;n<e.length;)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?($c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&$c2),n+=2):($c2=e.charCodeAt(n+1),$c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&$c2)<<6|63&$c3),n+=3);return t}},Base64={base64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(!e)return!1;var t="",n,r,i,o,s,a,l,c=0;do{n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=e.charCodeAt(c++),o=n>>2,s=(3&n)<<4|r>>4,a=(15&r)<<2|i>>6,l=63&i,isNaN(r)?a=l=64:isNaN(i)&&(l=64),t+=this.base64.charAt(o)+this.base64.charAt(s)+this.base64.charAt(a)+this.base64.charAt(l)}while(c<e.length);return t},decode:function(e){if(!e)return!1;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var t="",n,r,i,o,s=0;do{n=this.base64.indexOf(e.charAt(s++)),r=this.base64.indexOf(e.charAt(s++)),i=this.base64.indexOf(e.charAt(s++)),o=this.base64.indexOf(e.charAt(s++)),t+=String.fromCharCode(n<<2|r>>4),64!=i&&(t+=String.fromCharCode((15&r)<<4|i>>2)),64!=o&&(t+=String.fromCharCode((3&i)<<6|o))}while(s<e.length);return t}},Hex={hex:"0123456789abcdef",encode:function(e){if(!e)return!1;var t="",n,r=0;do{n=e.charCodeAt(r++),t+=this.hex.charAt(n>>4&15)+this.hex.charAt(15&n)}while(r<e.length);return t},decode:function(e){if(!e)return!1;e=e.replace(/[^0-9abcdef]/g,"");var t="",n=0;do{t+=String.fromCharCode(this.hex.indexOf(e.charAt(n++))<<4&240|15&this.hex.indexOf(e.charAt(n++)))}while(n<e.length);return t}},ASN1Data=function(e){this.error=!1,this.parse=function(e){if(!e)return this.error=!0,null;for(var t=[];e.length>0;){var n=e.charCodeAt(0);e=e.substr(1);var r=0;if(5==(31&n))e=e.substr(1);else if(128&e.charCodeAt(0)){var i=127&e.charCodeAt(0);if(e=e.substr(1),i>0&&(r=e.charCodeAt(0)),i>1&&(r=r<<8|e.charCodeAt(1)),i>2)return this.error=!0,null;e=e.substr(i)}else r=e.charCodeAt(0),e=e.substr(1);var o="";if(r){if(r>e.length)return this.error=!0,null;o=e.substr(0,r),e=e.substr(r)}32&n?t.push(this.parse(o)):t.push(this.value(128&n?4:31&n,o))}return t},this.value=function(e,t){if(1==e)return!!t;if(2==e)return t;if(3==e)return this.parse(t.substr(1));if(5==e)return null;if(6==e){var n=[],r=t.charCodeAt(0);n.push(Math.floor(r/40)),n.push(r-40*n[0]);var i=[],o=0,s;for(s=1;s<t.length;s++){var a=t.charCodeAt(s);if(i.push(127&a),128&a)o++;else{var l,c=0;for(l=0;l<i.length;l++)c+=i[l]*Math.pow(128,o--);n.push(c),o=0,i=[]}}return n.join(".")}return null},this.data=this.parse(e)},RSA={getPublicKey:function(e){return!(e.length<50)&&("-----BEGIN PUBLIC KEY-----"==e.substr(0,26)&&(e=e.substr(26),"-----END PUBLIC KEY-----"==e.substr(e.length-24)&&(e=e.substr(0,e.length-24),e=new ASN1Data(Base64.decode(e)),!e.error&&(e=e.data,"1.2.840.113549.1.1.1"==e[0][0][0]&&new RSAPublicKey(e[0][1][0][0],e[0][1][0][1])))))},encrypt:function(e,t){if(!t)return!1;var n=t.modulus.bitLength()+7>>3;if(!(e=this.pkcs1pad2(e,n)))return!1;if(!(e=e.modPowInt(t.encryptionExponent,t.modulus)))return!1;for(e=e.toString(16);e.length<2*n;)e="0"+e;return Base64.encode(Hex.decode(e))},decrypt:function(e,t){if(!t)return!1;for(e=Hex.encode(Base64.decode(e)).toString(16);"0"==e[0];)e=e.replace("0","");if(e=new BigInteger(e,16),!(e=e.modPowInt(t.encryptionExponent,t.modulus)))return!1;var n=t.modulus.bitLength()+7>>3;return e=this.pkcs1unpad2(e,n)},pkcs1pad2:function e(t,n){if(n<t.length+11)return null;for(var r=new Array,i=t.length-1;i>=0&&n>0;){var o=t.charCodeAt(i--);o<128?r[--n]=o:o>127&&o<2048?(r[--n]=63&o|128,r[--n]=o>>6|192):(r[--n]=63&o|128,r[--n]=o>>6&63|128,r[--n]=o>>12|224)}r[--n]=0;for(var s=new SecureRandom,a=new Array;n>2;){for(a[0]=0;0==a[0];)s.nextBytes(a)
;r[--n]=a[0]}return r[--n]=2,r[--n]=0,new BigInteger(r)},pkcs1unpad2:function e(t,n){for(var r=t.toByteArray(),i=0;i<r.length&&0==r[i];)++i;for(++i;0!=r[i];)if(++i>=r.length)return null;for(var o="";++i<r.length;){var s=255&r[i];s<128?o+=String.fromCharCode(s):s>191&&s<224?(o+=String.fromCharCode((31&s)<<6|63&r[i+1]),++i):(o+=String.fromCharCode((15&s)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return o}},__InputSecurity={rsaDecrypt:function(e){return RSA.decrypt(e,__InputSecurity.getPublicRSA())},rsaEncrypt:function(e){return RSA.encrypt(e,__InputSecurity.getPublicRSA())},getPublicRSA:function(){return RSA.getPublicKey("-----BEGIN PUBLIC KEY-----MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAPJwwNa//eaQYxkNsAODohg38azVtalEh7Lw4wxlBrbDONgYaebgscpjPRloeL0kj4aLI462lcQGVAxhyh8JijsCAwEAAQ==-----END PUBLIC KEY-----")},processSecuredData:function(e){if(e&&e.__maskedData){for(var t=e.__maskedData.split("__==__"),n="",r=0;r<t.length;r++)t[r]&&(n+=__InputSecurity.rsaDecrypt(t[r]));return JSON.parse(n)}return!1},processResponseData:function(e){var t=__InputSecurity.processSecuredData(e);return 0==t?e:t},processFormFields:function(e,t){if(e&&!_.isEmpty(e)){var n={};t||(t={}),t.secured=!0,t&&1==t.secured?_.forEach(e,function(e,r){if(t.unsecuredFields&&!1!==_.contains(t.unsecuredFields,r)||!0!==_.isArray(e)&&!0!==_.isObject(e)){if(t.unsecuredFields&&!1!==_.contains(t.unsecuredFields,r)||!0===_.isArray(e)||!0===_.isObject(e))n[r]=e;else if(e||0==e){(_.isBoolean(e)||_.isNumber(e))&&(e=String(e));var i=__InputSecurity.rsaEncrypt(e);if(0==i){for(var o=e.match(/.{1,30}/g),s="",a=0;a<o.length;a++){var l=__InputSecurity.rsaEncrypt(o[a]);if(0==l){throw"Encryption Failed for { "+r+" } VALUE due to length";s=!1;break}s=s+l+"__==__"}i=s}var c=__InputSecurity.rsaEncrypt(r);if(0==c)throw"Encryption Failed for { "+c+" } KEY due to length";n[c]=i}}else n[r]=__InputSecurity.processFormFields(e)}):n=e}return n}};_.templateSettings.variable="__tData";var __globals={translate_strings:{}},__Utils={log:function(e,t){if(window.appConfig&&window.appConfig.debug){var n="",r="";t&&_.isString(e)?(n=t,r="%c ",console.log(r+e,n)):console.log(e)}},syntaxHighlight:function(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="color: darkorange;";return/^"/.test(e)?t=/:$/.test(e)?"color: red;":"color: green;":/true|false/.test(e)?t="color: blue;":/null/.test(e)&&(t="color: magenta;"),'<span style="'+t+'">'+e+"</span>"})},displayInTabWindow:function(e){if(window.appConfig&&window.appConfig.debug)if(e){var t="";_.isObject(e)?(_.has(e,"data")&&(t='<pre style="font-size:14px; outline: 1px solid #ccc; padding: 10px; margin: 0px;"><strong>URL: </strong>'+e.config.url+" <strong><br>Method: </strong>"+e.config.method+" <strong><br>statusText: </strong>"+e.statusText+" ("+e.status+') <strong style="color:red"><br>Error Message: '+e.data.message+"</strong></pre>"),t+='<pre style="outline: 1px solid #ccc; padding: 5px; margin: 0px;">'+__Utils.syntaxHighlight(JSON.stringify(e,null,4))+"</pre>"):t=e;var n=window.open("","_blank");n.document.write(t),n.document.close(),n.focus()}else console.log("__Utils: Text not found for window.")},openEmailDebugView:function(e){window.appConfig&&window.appConfig.debug&&(window.open(e,"__emailDebugView"),__Utils.info("Request Sent to open Email Debug View."))},error:function(e){window.appConfig&&window.appConfig.debug&&console.error(e)},info:function(e){window.appConfig&&window.appConfig.debug&&console.info(e)},warn:function(e){window.appConfig&&window.appConfig.debug&&console.warn(e)},throwError:function(e){if(window.appConfig&&window.appConfig.debug)throw new Error(e)},jsdd:function(e){if(window.appConfig&&window.appConfig.debug){if(e.__dd&&e.__pr&&!e.__prExecuted){var t=1;_.forEach(e.__pr,function(e){var n="";console.log("%c Server __pr "+t+" --------------------------------------------------","color:#f0ad4e"),_.forEach(e,function(e,t){"debug_backtrace"!==t?console.log(e):n=e}),console.log("%c Reference  --------------------------------------------------","color:#f0ad4e"),console.log(n),t++}),e.__prExecuted=!0,console.log("%c ------------------------------------------------------------ __pr end","color: #f0ad4e")}if(e.__dd&&e.__clog&&(e.__clogExecuted||(__Utils.clog(e),e.__clogExecuted=!0)),e.__dd&&"__dd"===e.__dd){if(!e.__ddExecuted){console.log("%c Server __dd  --------------------------------------------------","color:#ff0000");var n=1;_.forEach(e.data,function(e,t){"debug_backtrace"!==t?(console.log(e),n++):(console.log("%c Reference  --------------------------------------------------","color:#ff0000"),console.log(e))}),e.__ddExecuted=!0}throw console.log("%c ------------------------------------------------------------ __dd end","color: #ff0000"),"------------------------------------------------------------ __dd end."}}},clog:function(e){if(!t)var t={__clogCount:0};var n=1,r=e.__clogType?e.__clogType:"";_.forEach(e.__clog,function(e){_.forEach(e,function(e){console.log("%c __clog "+r+" "+n+" --------------------------------------------------","color: #bada55"),console.log("%c "+e,"color: #9c9c9c"),n++,t.__clogCount++})}),console.log("%c ------------------------------------------------------------ __clog "+r+" items end. TotalCount: "+t.__clogCount,"color: #bada55")},detectIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},time:function(e){window.appConfig&&window.appConfig.debug&&(__Utils.detectIE()>=11||0==__Utils.detectIE())&&console.time(e)},timeEnd:function(e){window.appConfig&&window.appConfig.debug&&(__Utils.detectIE()>=11||0==__Utils.detectIE())&&console.timeEnd(e)},modalTemplatize:function(e,t,n){var r=$(e),i=jQuery.Deferred(),o=r.data("modalEvent"),s=r.data("modalCloseEvent"),a=r.data("modalId"),l=_.template(r.html()),c=r.data("replaceTarget"),u={};return t?$(a).on((o||"show")+".bs.modal",function(e){"function"==typeof t?(u=t(e,$(e.relatedTarget).data()),i.resolve(u)):__Utils.error("responseCallback should be function"),$(c||"modal-body").html(l(u))}):i.resolve(u),n&&$(a).on((s||"hidden")+".bs.modal",function(e){"function"==typeof n?n(e,u):__Utils.error("closeCallback should be function")}),i.promise()},queryConvertToObject:function(e){if(_.isString(e)){for(var t=e.replace("?","&").split("&"),n={},r=0,i=t.length;r<i;r++){var o=t[r].split("=");n[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return n}return e},viewReload:function(){location.reload()},template:function(e,t){var n=$("script"+e).html();if(n){return _.template(n)(t)}return t},apiURL:function(e,t){return _.isString(e)?!_.isEmpty(t)&&_.isObject(t)&&_.forEach(t,function(t,n){e=e.replace(n,t)}):__Utils.error("__Utils:: Invalid API url"),e},getTranslation:function(e,t){return __globals.translate_strings[e]?__globals.translate_strings[e]:t||e},setTranslation:function(e,t){return _.isObject(e)?(__globals.translate_strings=$.extend({},__globals.translate_strings,e),!0):!(!_.isString(e)||!t)&&(__globals.translate_strings[e]=t,!0)}};__globals.clog=__Utils.clog;var __DataRequest={__processSubmitForm:function(e,t){if(t.validate({errorClass:"lw-validation-error",errorPlacement:function(e,t){$(t).siblings(".input-group-prepend").length||$(t).siblings(".input-group-append").length?e.insertAfter($(t).parents(".input-group")).show():e.insertAfter(t).show()}}),!t.valid())return!1;t.data("show-processing")&&t.addClass("lw-form-in-process").prepend('<div class="lw-spinner-box"><div class="spinner-border" role="status"></div><small>'+__Utils.getTranslation("processando")+"</small></div>"),e.data("action")&&t.attr("action",e.data("action")),__DataRequest.process(t).then(function(){t.data("show-processing")&&t.removeClass("lw-form-in-process").find(".lw-spinner-box").remove()})},process:function($this){var isFormRequest=$this.is("form"),requestMethod=$this.data("method")?$this.data("method"):!0===isFormRequest?"post":"get",unsecuredFields=$this.data("unsecured-fields"),isSecuredForm=$this.data("secured"),requestURL=isFormRequest?$this.attr("action"):$this.data("action")?$this.data("action"):$this.attr("href"),processFormFieldsOptions={};if(unsecuredFields&&(processFormFieldsOptions.unsecuredFields=unsecuredFields.split(",")),1==isSecuredForm)var inputData=__InputSecurity.processFormFields(__Utils.queryConvertToObject(!0===isFormRequest?$this.serialize():$this.data("post-data")),processFormFieldsOptions);else var inputData=!0===isFormRequest?$this.serialize():$this.data("post-data");var responseCallback=eval($this.data("callback")),optionsForRequest={thisScope:$this};return _.isUndefined(responseCallback)&&(responseCallback=null),$this.data("pre-callback")&&(optionsForRequest.preCallback=eval($this.data("pre-callback"))),$this.data("showMessage")&&(optionsForRequest.showMessage=$this.data("showMessage")),__DataRequest.__protectedAjaxProcess(requestURL,inputData,responseCallback,requestMethod,optionsForRequest)},post:function(e,t,n,r){return t=t||{},n=n||null,__DataRequest.__protectedAjaxProcess(e,t,n,"post",r)},get:function(e,t,n,r){return t=t||{},n=n||null,__DataRequest.__protectedAjaxProcess(e,t,n,"get",r)},__protectedAjaxProcess:function(e,t,n,r,i){var o=jQuery.Deferred();i||(i={}),t=__Utils.queryConvertToObject(t),i=$.extend({},{csrf:!0,thisScope:$(this),preCallback:null,showMessage:!1},i);var s={},a=i.thisScope;return 1==a.data("is-request-processing")&&__Utils.throwError("request already in process"),a.data("is-request-processing",!0),!0===i.csrf&&(s["X-CSRF-TOKEN"]=appConfig.csrf_token),i.preCallback&&_.isFunction(i.preCallback)&&(t=i.preCallback(t)),$.ajax({type:r||"get",url:e,dataType:"JSON",data:t||{},headers:s,error:function(t){a.data("is-request-processing",!1),__Utils.timeEnd("DataRequest."+r+" "+e+" "),o.resolve(t),showErrorMessage(t.responseJSON&&t.responseJSON.message?t.responseJSON.message:"Mensagem não disponível"),422===t.status?$.each(t.responseJSON.errors,function(e,t){a.find("#"+e+"-error").length?a.find("#"+e+"-error").text(t).show():a.find('.input-group-prepend ~ [name="'+e+'"]').length||a.find('[name="'+e+'"] ~ .input-group-append').length?$('<label id="'+e+'-error" class="lw-validation-error" for="'+e+'">'+t+"</label>").insertAfter(a.find('[name="'+e+'"]').parents(".input-group")).show():$('<label id="'+e+'-error" class="lw-validation-error" for="'+e+'">'+t+"</label>").insertAfter(a.find('[name="'+e+'"]')[0]).show()}):__Utils.displayInTabWindow(t.responseJSON)},beforeSend:function(){__Utils.time("DataRequest."+r+" "+e+" ")},success:function(e){"post"==r?e.data&&(e.data.show_message||i.showMessage)&&(1==e.reaction?showSuccessMessage(e.data.message?e.data.message:"Mensagem não disponível"):14==e.reaction?showWarnMessage(e.data.message?e.data.message:"Mensagem não disponível"):showErrorMessage(e.data.message?e.data.message:"Mensagem não disponível")):e.message&&(e.show_message||i.showMessage)&&(1==e.reaction_code?showSuccessMessage(e.message):14==e.reaction_code?showWarnMessage(e.message):showErrorMessage(e.message)),21==e.reaction&&_.has(e.data,"redirectUrl")&&(window.location=e.data.redirectUrl),e=__InputSecurity.processResponseData(e),n&&"function"==typeof n&&n(e),e.response_action&&("redirect"===e.response_action.type?window.location=e.response_action.url:"replace"===e.response_action.type&&$(e.response_action.target).html(e.response_action.content))},complete:function(t){a.data("is-request-processing",!1),o.resolve(t);var n=t.responseJSON;__Utils.timeEnd("DataRequest."+r+" "+e+" "),n&&n.__emailDebugView&&__Utils.openEmailDebugView(n.__emailDebugView),n&&n.__dd&&__Utils.jsdd(n)}}),o.promise()},updateModels:function(scopeName,dataObject){scopeName&&_.isObject(scopeName)?(dataObject=scopeName,scopeName=""):scopeName&&_.isString(scopeName)?scopeName+=".":scopeName="",dataObject&&!_.isObject(dataObject)&&__Utils.error("dataObject should be present as object");for(var key in dataObject)if(dataObject&&dataObject.hasOwnProperty(key)){var element=dataObject[key],$elements=$.find('[data-model="'+scopeName+key+'"]');$elements.length&&$.each($elements,function(e,t){var n=$(t);n.is("input:radio")||n.is("input:checkbox")?element&&n.val()==element?n.prop("checked",!0):n.prop("checked",!1):n.is("input")||n.is("select")?n.val(element):n.text(element),n=null});var $htmlElements=$.find('[data-model-html="'+scopeName+key+'"]');$htmlElements.length&&$.each($htmlElements,function(e,t){var n=$(t);n.html(element),n=null});var $ifShowHtmlElements=$.find('[data-show-if="'+scopeName+key+'"]');$ifShowHtmlElements.length&&$.each($ifShowHtmlElements,function(index,elementItem){var $ifShowHtmlElementItem=$(elementItem);eval(element)?$ifShowHtmlElementItem.show():$ifShowHtmlElementItem.hide(),$ifShowHtmlElementItem=null}),$elements=$htmlElements=$ifShowHtmlElements=element=null}}};window.__dd=function(e,t){if(window.appConfig&&window.appConfig.debug){console.error("JS __dd --------------------------------------------------");for(var n=Array.prototype.slice.call(arguments),r=0;r<n.length;++r)console.log(n[r]);throw new Error("-------------------------------------------------- JS __dd END")}},window.__pr=function(){if(window.appConfig&&window.appConfig.debug){console.info("JS __pr --------------------------------------------------");for(var e=Array.prototype.slice.call(arguments),t=0;t<e.length;++t)console.log(e[t]);console.groupCollapsed("-------------------------------------------------- JS __pr END"),console.trace(),console.groupEnd()}};var __Cookie={set:function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}};$("body").on("submit","form.lw-ajax-form",function(e){e.preventDefault();var t=$(e.target),n=$(this);return __DataRequest.__processSubmitForm(t,n)}),$("body").on("change","form.lw-ajax-form[lwSubmitOnChange]",function(e){e.preventDefault();var t=$(e.target),n=$(this);return __DataRequest.__processSubmitForm(t,n)}),$("body").on("click",".lw-ajax-form-submit-action",function(e){console.log("Ajax Request"),e.preventDefault();var t=$(this),n=t.parents("form");return __DataRequest.__processSubmitForm(t,n)}),$("body").on("click",".lw-ajax-link-action",function(e){e.preventDefault(),__DataRequest.process($(this))}),$("body").on("click",".lw-ajax-link-action-via-confirm",function(e){e.preventDefault();var t=$(this);t.data("confirm")&&showConfirmation(t.data("confirm"),function(){return __DataRequest.process(t)})}),$.extend($.fn.dataTable.defaults,{serverSide:!0,iCookieDuration:60,paging:!0,processing:!0,responsive:!0,destroy:!0,retrieve:!0,lengthChange:!1,language:{emptyTable:"Não há registros."},searching:!1,ajax:{data:function(e){e.page=e.start/e.length+1}}});var notyDefaultOptions={layout:"topRight",theme:"bootstrap-v4",progressBar:!0,timeout:3e3,closeWith:["click"],animation:{open:"animated bounceInRight",close:"animated bounceOutRight"}},pusher;configure("");var rtc={client:null,joined:!1,published:!1,localStream:null,remoteStreams:[],params:{}},userType=null,__AudioVisualRequest={callFailedOrDisconnected:function(){$("body").removeClass("lw-audio-video-in-processing"),$("body").removeClass("lw-audio-call-in-processing"),$("body").removeClass("lw-video-call-in-processing"),__Utils.viewReload()},handleCallEvents:function(e,t,n){e.client.on("peer-leave",function(t){var r=t.uid;r!=e.params.uid&&removeView(r),"publisher"==n?(__AudioVisualRequest.callFailedOrDisconnected(),__DataRequest.updateModels({callerCallStatus:__callStatusStrings.disconnect,callerCloseDialogBtn:!0,callerDisConnectCallBtn:!1})):"subscriber"==n&&(__AudioVisualRequest.callFailedOrDisconnected(),__DataRequest.updateModels({receiverCallStatus:__callStatusStrings.disconnect,receiverAcceptCallBtn:!1,receiverDisconnectCallBtn:!1,receiverCloseDialogBtn:!0})),__AudioVisualRequest.callFailedOrDisconnected()}),e.client.on("stream-published",function(t){"publisher"==n?($("#lwCallRingtone")[0].play(),__DataRequest.updateModels({callerCallStatus:__callStatusStrings.ringing}),$("#lwCallerCallingStatus").text(__callStatusStrings.ringing)):"subscriber"==n&&__DataRequest.updateModels({receiverCallStatus:__callStatusStrings.connecting}),e.published=!0}),e.client.on("stream-added",function(t){var n=t.stream;n.getId()!==e.params.uid&&e.client.subscribe(n,function(e){errorCallback(e)})}),e.client.on("stream-subscribed",function(t){var r=t.stream,i=r.getId();e.remoteStreams.push(r),addView(i),r.play("remote_video_"+i),"publisher"==n?($("#lwCallRingtone")[0].pause(),__DataRequest.updateModels({callerCallStatus:__callStatusStrings.connected})):"subscriber"==n&&($("#lwCallRingtone")[0].pause(),__DataRequest.updateModels({receiverCallStatus:__callStatusStrings.connected}))}),e.client.on("stream-removed",function(t){var n=t.stream,r=n.getId();n.stop("remote_video_"+r),e.remoteStreams=e.remoteStreams.filter(function(e){return e.getId()!==r}),removeView(r)})},joinCall:function(e,t,n,r,i,o,s,a){var l={appID:e,channel:r,uid:t,token:n};rtc.client=AgoraRTC.createClient({mode:"rtc",codec:"h264"}),__AudioVisualRequest.handleCallEvents(rtc,t,o),rtc.client.init(l.appID,function(){rtc.client.join(l.token,l.channel,l.uid,function(e){rtc.params.uid=e;var t=!1;2==i&&(t=!0),rtc.localStream=AgoraRTC.createStream({streamID:rtc.params.uid,audio:!0,video:t,screen:!1}),navigator.mediaDevices.getUserMedia({audio:!0,video:t}).then(function(e){}).catch(function(e){s(e)}),rtc.localStream.init(function(){$("body").addClass("lw-audio-video-in-processing"),1==i?$("body").addClass("lw-audio-call-in-processing"):2==i&&$("body").addClass("lw-video-call-in-processing"),rtc.localStream.play("local_stream"),rtc.client.publish(rtc.localStream,function(e){__Utils.error("publish failed",e),__AudioVisualRequest.callFailedOrDisconnected(),s(e)}),a(!0)},function(e){__Utils.error("init local stream failed ",e),__AudioVisualRequest.callFailedOrDisconnected(),s(e)})},function(e){__Utils.error("client join failed",e),__AudioVisualRequest.callFailedOrDisconnected(),s(e)})},function(e){__Utils.error(e),s(e)})},disconnectCall:function(e,t,n){if(_.isEmpty(rtc.remoteStreams)){var r=null;"publisher"==e?r=t:"subscriber"==e&&(r=n),_.isEmpty(r)||__DataRequest.get(r,null,function(t){if(1==t.reaction&&!rtc.client){if("publisher"==e)return $("#lwAudioCallDialog").modal("hide"),void __AudioVisualRequest.callFailedOrDisconnected();if("subscriber"==e)return $("#lwIncomingCallDialog").modal("hide"),void __AudioVisualRequest.callFailedOrDisconnected()}})}rtc.client?rtc.client.leave(function(){for(__AudioVisualRequest.unPublishStream(rtc),rtc.localStream.stop(),rtc.localStream.close();rtc.remoteStreams.length>0;){var t=rtc.remoteStreams.shift(),n=t.getId();t.stop(),removeView(n)}rtc.localStream=null,rtc.remoteStreams=[],rtc.client=null,rtc.published=!1,"publisher"==e?($("#lwAudioCallDialog").modal("hide"),__AudioVisualRequest.callFailedOrDisconnected()):"subscriber"==e&&($("#lwIncomingCallDialog").modal("hide"),__AudioVisualRequest.callFailedOrDisconnected())},function(e){__Utils.error(e),errorCallback(e)}):"publisher"==e?($("#lwAudioCallDialog").modal("hide"),__AudioVisualRequest.callFailedOrDisconnected()):"subscriber"==e&&(__DataRequest.updateModels({callerCallStatus:__callStatusStrings.disconnect}),__AudioVisualRequest.callFailedOrDisconnected())},unPublishStream:function(e){var t=e.published;e.client.unpublish(e.localStream,function(n){e.published=t,__Utils.error(n)}),e.published=!1}},__Messenger={sendMessageUrl:null,loadUploaderInstance:function(){var e=null,t=Math.random().toString(36).substr(2,9);_.isEmpty(e)&&(e=FilePond.create({name:"filepond",labelIdle:"<i class='fas fa-paperclip'></i>",allowDrop:!1,allowImagePreview:!1,allowRevert:!1,server:{process:{url:__Messenger.sendMessageUrl,method:"POST",headers:{"X-CSRF-TOKEN":appConfig.csrf_token},withCredentials:!1,onload:function(e){var t=JSON.parse(e),n=t.data,r=n.storedData;1==t.reaction?__Messenger.replaceMessage(r.type,r.message,r.unique_id,r.created_on):(__Messenger.removeMessage(r.type,r.unique_id),showErrorMessage(n.message))},ondata:function(e){return e.append("type",2),e.append("unique_id",t),e}}},onaddfilestart:function(){__Messenger.appendMessage(2,"",t),$("#lwMessengerFileUpload").hide(),$("#lwUploadingLoader").show()},onprocessfile:function(t,n){e.removeFile(n.id),$("#lwMessengerFileUpload").show(),$("#lwUploadingLoader").hide()}}),e.appendTo(document.getElementById("lwMessengerFileUpload")))},$emojiElement:null,loadEmojiContent:function(){__Messenger.$emojiElement=$("#lwChatMessage").emojioneArea({placeholder:"type message...",events:{keyup:function(e,t){13==t.keyCode&&__Messenger.sendMessage(1,{message:e[0].innerText,type:1})}}})},openStickerBottomSheet:function(){$(".lw-messenger").on("click",".lw-open-stickers-action, .lw-open .lw-overlay",function(){$(".lw-messenger-bottom-sheet").toggleClass("lw-open"),__Messenger.getStickers()})},getStickers:function(){var e=$(".lw-heading"),t=$("#lwStickerImagesContainer");e.html(""),t.html(""),$("#lwGifImagesContainer").html(""),e.append('<h5><i class="fas fa-sticky-note text-success"></i> '+__Utils.getTranslation("sticker_name_label","Stickers")+"</h5>")},fetchStickers:function(e){var t=e.data.stickers;_.isEmpty(t)?$("#lwStickerImagesContainer").append("<?= __tr('No result found.') ?>"):_.forEach(t,function(e){stickerImageTag="<span class='lw-buy-sticker-container'><img height='100px' width='110px' src='"+e.image_url+"' id='"+e.id+"' class='lw-sticker-image' data-is-free='"+e.is_free+"' data-is-purchased='"+e.is_purchased+"'>",e.is_free?stickerImageTag+="<span class='text-center'>Free</span>":e.is_purchased?e.is_purchased&&(stickerImageTag+="<span class='text-center'>Purchased</span>"):stickerImageTag+="<div id='lwBuyNowStickerBtn-"+e.id+"' class='text-center'><span>"+e.formatted_price+"</span><br><button type='button' class='btn btn-secondary btn-sm' onclick='__Messenger.buySticker("+e.id+")'>Buy Now</button></span></div>",$("#lwStickerImagesContainer").append(stickerImageTag)}),$(".lw-sticker-image").on("click",function(){$(this).data("is-free")||$(this).data("is-purchased")?(__Messenger.sendMessage(12,{message:this.currentSrc,type:12,item_id:this.id}),$(".lw-messenger-bottom-sheet").toggleClass("lw-open")):__Messenger.buySticker(this.id)})},buySticker:function(e){showConfirmation($("#lwBuyStickerText").data("message"),function(){__DataRequest.post(__Messenger.buyStickerUrl,{sticker_id:e},function(t){1==t.reaction&&($("#lwTotalCreditWalletAmt").html(t.data.availableCredits),$("#lwBuyNowStickerBtn-"+e).replaceWith("<span class='text-center'>Purchased</span>"))})},{id:"lwBuyStickerAlert"})},openGifBottomSheet:function(){$(".lw-messenger").on("click",".lw-open-gif-action, .lw-open .lw-overlay",function(){$(".lw-messenger-bottom-sheet").toggleClass("lw-open"),__Messenger.getGifImagesContent()})},getGifImagesContent:function(){var e=$(".lw-heading");e.html(""),e.append('<h5><i class="fa fa-images text-success"></i> Send Gif</h5><div class="input-group lw-gif-search-input"><input type="text" class="form-control" name="search" id="lwSearchInput" value="" placeholder="Search GIF"><div class="input-group-append"><button type="button" class="btn btn-secondary" onclick="__Messenger.searchGifImages()"><i class="fas fa-search"></i></button></div></div>'),__Messenger.fetchGifImages()},searchGifImages:function(){var e=$("#lwSearchInput").val();__Messenger.fetchGifImages({searchValue:e})},fetchGifImages:function(e){$("#lwStickerImagesContainer").html(""),$lwGifImagesContainer=$("#lwGifImagesContainer"),$lwGifImagesContainer.html('<div class="lw-messenger-image-loading"></div>');var t="";params={limit:50,api_key:__Messenger.giphyKey,fmt:"json"},_.isUndefined(e)?t="https://api.giphy.com/v1/gifs/trending?":(t="https://api.giphy.com/v1/gifs/search?",params.q=e.searchValue),__DataRequest.get(t+$.param(params),{},function(e){var t=e.data;$lwGifImagesContainer.html(""),_.isEmpty(t)?$lwGifImagesContainer.append(__Utils.getTranslation("gif_no_result","Result Not Found")):_.forEach(t,function(e){imageTag=$("<img>"),imageTag.attr({height:"100px",width:"100px",src:e.images.preview_gif.url,class:"lw-gif-image lw-lazy-img"}),$lwGifImagesContainer.append(imageTag)}),$(".lw-gif-image").on("click",function(){$("<img>").attr({height:"100px",width:"100px",src:this.currentSrc}),__Messenger.sendMessage(12,{message:this.currentSrc,type:8}),$(".lw-messenger-bottom-sheet").toggleClass("lw-open")})},{csrf:!1})},acceptMessageRequest:function(){$("#lwSendMessageForm").show(),$("#lwAcceptChatRequestBtn").hide(),$("#lwDeclineChatRequestBtn").hide(),__Messenger.hideShowDropdownButtons(!0)},declineMessageRequest:function(){$("#lwDeclineChatRequestBtn").hide(),__Messenger.hideShowDropdownButtons(!1)},createSendButtonInstance:function(){$("#lwSendMessageButton").on("click",function(){__Messenger.sendMessageViaForm()})},sendMessageViaForm:function(){var e="",t=$("#lwSendMessageForm").serializeArray();_.forEach(t,function(t,n){"message"==t.name&&(e=t.value)}),__Messenger.sendMessage(1,{message:e,type:1})},sendMessage:function(e,t){var n=Math.random().toString(36).substr(2,9),r=t.message;_.isEmpty(r)?(showErrorMessage(__Utils.getTranslation("message_is_required","Message is required")),__Utils.throwError("Message is required")):__Messenger.appendMessage(e,r,n),t.unique_id=n,__DataRequest.post(__Messenger.sendMessageUrl,t,function(e){var t=e.data,n=t.storedData;1==e.reaction?__Messenger.replaceMessage(n.type,n.message,n.unique_id,n.created_on):__Messenger.removeMessage(n.type,n.unique_id)})},appendMessage:function(e,t,n){var r=$(".lw-messenger-chat-window"),i="";i=1==e?'<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12" id="'+n+'"><p class="lw-messenger-chat-item">'+t+'<span class="lw-messenger-chat-meta">Now</span></p><img src="'+__Messenger.loggedInUserProfilePicture+'" class="lw-profile-picture lw-online" alt=""></div>':'<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12" id="'+n+'"><p class="lw-messenger-chat-item"><p class="lw-messenger-chat-item col-md-8"><span class="lw-messenger-image-loading"> loading ...please wait</span><span class="lw-messenger-chat-meta">10 February 2020 at 4:00 pm</span></p><span class="lw-messenger-chat-meta">Now</span></p><img src="'+__Messenger.loggedInUserProfilePicture+'" class="lw-profile-picture lw-online" alt=""></div>',r.append(i),__Messenger.$emojiElement[0].emojioneArea.setText(""),$(".lw-messenger-chat-window").scrollTop(1e6)},replaceMessage:function(e,t,n,r){if(1!=e){var i='<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12"><p class="lw-messenger-chat-item"><img src="'+t+'" alt=""><span class="lw-messenger-chat-meta">'+r+'</span></p><img src="'+__Messenger.loggedInUserProfilePicture+'" class="lw-profile-picture lw-online" alt=""></div>';$("#"+n).replaceWith(i)}},removeMessage:function(e,t){1!=e&&$("#"+t).remove()},appendReceivedMessage:function(e,t,n){var r=$(".lw-messenger-chat-window"),i="";i=1==e?'<div class="lw-messenger-chat-message align-self-center row col-md-12 lw-messenger-chat-recipient"><img src="'+__Messenger.recipientUserProfilePicture+'" class="lw-profile-picture lw-online" alt=""><p class="lw-messenger-chat-item col-md-8">'+t+'<span class="lw-messenger-chat-meta">'+n+"</span></p></div>":'<div class="lw-messenger-chat-message align-self-center row col-md-12 lw-messenger-chat-recipient"><img src="'+__Messenger.recipientUserProfilePicture+'" class= "lw-profile-picture lw-online" alt=""><p class="lw-messenger-chat-item col-md-8"><img src="'+t+'" alt=""><span class="lw-messenger-chat-meta">'+n+"</span></p></div>",r.append(i),$(".lw-messenger-chat-window").scrollTop(1e6)},toggleSidebarOnMobileView:function(){$(".lw-messenger").hasClass("lw-messenger-sidebar-opened")?$(".lw-messenger").removeClass("lw-messenger-sidebar-opened"):$(".lw-messenger").addClass("lw-messenger-sidebar-opened")},hideShowChatSidebar:function(){$("#lwChatSidebarToggle").on("click",function(){__Messenger.toggleSidebarOnMobileView()})},hideShowDropdownButtons:function(e){e?($("#lwDeleteAllChatActiveButton").show(),$("#lwDeleteAllChatDisableButton").hide(),$("#lwAudioCallBtn").show(),$("#lwAudioCallDisableBtn").hide(),$("#lwVideoCallBtn").show(),$("#lwVideoCallDisableBtn").hide()):($("#lwDeleteAllChatActiveButton").hide(),$("#lwDeleteAllChatDisableButton").show(),$("#lwAudioCallBtn").hide(),$("#lwAudioCallDisableBtn").show(),$("#lwVideoCallBtn").hide(),$("#lwVideoCallDisableBtn").show())},showMessageRequestNotification:function(){$(".lw-messenger #lwAudioCallDisableBtn, .lw-messenger #lwVideoCallDisableBtn").on("click",function(){$(".lw-messenger #lwUserNotAcceptedMsgRequest").modal({keyboard:!1})}),$(".lw-messenger .lw-not-accepted-dialog-close-btn, .lw-messenger .lw-not-accepted-dialog-close-btn").on("click",function(){$(".lw-messenger #lwUserNotAcceptedMsgRequest").modal("hide")})}},currentSelectedUserId=null,currentSelectedUserUid=null;!function($){"use strict";__globals.translate_strings.uploader_default_text="<span class='filepond--label-action'><?= __tr('Drag & Drop Files or Browse') ?></span>",$("#sidebarToggle, #sidebarToggleTop").on("click tap",function(e){$("body").toggleClass("sidebar-toggled"),$(".sidebar").toggleClass("toggled"),$(".sidebar").hasClass("toggled")&&$(".sidebar .collapse").collapse("hide")}),$(window).resize(function(){$(window).width()<768&&$(".sidebar .collapse").collapse("hide")}),$(window).width()<768&&($("body").toggleClass("sidebar-toggled"),$(".sidebar").toggleClass("toggled")),$("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){if($(window).width()>768){var t=e.originalEvent,n=t.wheelDelta||-t.detail;this.scrollTop+=30*(n<0?1:-1),e.preventDefault()}}),$(document).on("scroll",function(){$(this).scrollTop()>100?$(".scroll-to-top").fadeIn():$(".scroll-to-top").fadeOut()}),$(document).on("click","a.scroll-to-top",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery),$(function(){FilePond.registerPlugin(FilePondPluginImagePreview,FilePondPluginFilePoster,FilePondPluginFileValidateType),$(".lw-file-uploader").each(function(index,uploader){var actionUrl=$(this).data("action"),responseCallback=eval($(this).data("callback")),defaultImage=$(this).data("default-image-url"),removeMediaAfterUpload=$(this).data("remove-media"),removeAllMediaAfterUpload=$(this).data("remove-all-media"),allowedMediaExtension=$(this).data("allowed-media"),filePondAdditionalOptions={maxParallelUploads:10,imagePreviewMaxHeight:175,labelIdle:$(this).data("label-idle")?$(this).data("label-idle"):__Utils.getTranslation("uploader_default_text"),acceptedFileTypes:allowedMediaExtension,fileValidateTypeDetectType:function(e,t){return new Promise(function(e,n){allowedMediaExtension&&allowedMediaExtension.indexOf(t)<0&&n(),e(t)})},allowRevert:!1,server:{process:{url:actionUrl,method:"POST",headers:{"X-CSRF-TOKEN":appConfig.csrf_token},withCredentials:!1,onload:function(e){var t=JSON.parse(e);switch(t.reaction){case 1:$(".lw-uploaded-file").val(t.data.fileName),showSuccessMessage(t.data.message);break;case 14:showWarnMessage(t.data.message);break;default:showErrorMessage(t.data.message);break}"function"==typeof responseCallback&&responseCallback(t)}}},onprocessfile:function(e,t){removeMediaAfterUpload&&pond.removeFile(t.id),removeAllMediaAfterUpload&&pond.removeFiles()}};void 0===defaultImage||_.isEmpty(defaultImage)||(filePondAdditionalOptions=$.extend({},filePondAdditionalOptions,{files:[{options:{
type:"local",file:{name:"",size:uploader.size,type:"image/jpg"},metadata:{poster:defaultImage}}}]}));var pond=FilePond.create(this,filePondAdditionalOptions)})});var photoSwipeGallery=function(e,t){var t=parseInt(t),n={index:t,history:!1,focus:!1,closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!1,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToToggleControls:!1,showAnimationDuration:0,hideAnimationDuration:0};new PhotoSwipe(document.querySelectorAll(".pswp")[0],PhotoSwipeUI_Default,e,n).init()};$(function(){$(".lw-datatable-photoswipe-gallery").on("click",function(e){var t,n=0;$(e.target).hasClass("lw-photoswipe-gallery-img")&&(t=[{src:$(e.target).attr("src"),w:900,h:900}],photoSwipeGallery(t,0))}),$(".lw-photoswipe-gallery-img").on("click",function(e){var t=$(this).siblings(".lw-photoswipe-gallery-img").addBack(),n,r=0;t.length>0?(n=t.map(function(e,t){return{src:$(t).attr("src"),w:900,h:900}}),$(e.target).data("img-index")&&(r=$(e.target).data("img-index")),n.length>0&&photoSwipeGallery(n,r)):(n=[{src:$(e.target).attr("src"),w:900,h:900}],n.length>0&&photoSwipeGallery(n,r))})});var applyLazyImages=function(){$(".lw-lazy-img").Lazy({beforeLoad:function(e){},afterLoad:function(e){e.addClass("lw-lazy-img-loaded"),e.removeClass("lw-lazy-img-loading")},onError:function(e){e.addClass("lw-lazy-img-error"),e.removeClass("lw-lazy-img-loading"),console.log("error loading "+e.data("src"))}})};$(function(){applyLazyImages()});
//# sourceMappingURL=./common-app.min.js.map